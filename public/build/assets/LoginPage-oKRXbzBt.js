import"./bootstrap.esm-CE2ldw4r.js";import{v as f,w}from"./runtime-dom.esm-bundler-D-ut1sz7.js";import{r as l,u as e,v as c,w as m,x as u,s as a,t as v,y as b,z as _}from"./runtime-core.esm-bundler-CO8B_OEo.js";const g=(i,s)=>{const t=i.__vccOpts||i;for(const[n,o]of s)t[n]=o;return t},y={name:"LoginForm",props:{csrfToken:{type:String,required:!0}},data(){return{form:{email:"",password:"",remember:!1},errors:{message:"",email:[],password:[]}}},methods:{async submitForm(){var i,s;if(this.errors={message:"",email:[],password:[]},!this.form.email){this.errors.email=["Електронна пошта обов’язкова."];return}if(!this.form.password){this.errors.password=["Пароль обов’язковий."];return}try{const t={Accept:"application/json","X-CSRF-TOKEN":this.csrfToken,"Content-Type":"application/json"},n=window.location.pathname+window.location.search,o={...this.form,redirect:n},r=await(await fetch("/api/login",{method:"POST",headers:t,body:JSON.stringify(o),credentials:"include"})).json();if(!r.success){this.errors={message:r.message||"Помилка входу",email:((i=r.errors)==null?void 0:i.email)||[],password:((s=r.errors)==null?void 0:s.password)||[]};return}const E=document.cookie.split("; ").find(h=>h.startsWith("laravel_session=")),p=r.redirect||"/";window.location.href=p==="/"?"/":p}catch(t){console.error("Помилка:",t.message),this.errors.message=t.message||"Невідома помилка"}}}},x={key:0,class:"text-danger mb-3"},k={class:"mb-3 filled form-group tooltip-end-bottom"},S={key:0,class:"text-danger"},T={class:"mb-3 filled form-group tooltip-end-bottom"},F={key:0,class:"text-danger"};function N(i,s,t,n,o,d){return a(),l("div",null,[e("form",{onSubmit:s[2]||(s[2]=w((...r)=>d.submitForm&&d.submitForm(...r),["prevent"])),class:"tooltip-end-bottom",novalidate:""},[o.errors.message&&o.errors.message.length>0?(a(),l("div",x,m(o.errors.message),1)):c("",!0),e("div",k,[s[3]||(s[3]=e("i",{"data-acorn-icon":"email"},null,-1)),u(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=r=>o.form.email=r),type:"email",class:"form-control",placeholder:"Email",required:""},null,512),[[f,o.form.email]]),o.errors.email.length?(a(),l("div",S,m(o.errors.email[0]),1)):c("",!0)]),e("div",T,[s[4]||(s[4]=e("i",{"data-acorn-icon":"lock-off"},null,-1)),u(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=r=>o.form.password=r),type:"password",class:"form-control pe-7",placeholder:"Password",required:""},null,512),[[f,o.form.password]]),o.errors.password.length?(a(),l("div",F,m(o.errors.password[0]),1)):c("",!0)]),s[5]||(s[5]=e("button",{type:"submit",class:"btn btn-lg btn-primary w-100"},"Вхід",-1))],32)])}const V=g(y,[["render",N]]),q={name:"LoginPage",components:{LoginForm:V},props:{csrfToken:{type:String,required:!0}}},C={class:"h-100"},P={class:"container-fluid p-0 min-h-100 position-relative"},j={class:"row g-0 h-100"},L={class:"col-12 col-lg-auto h-100 pb-4 px-4 pt-0 p-lg-0"},O={class:"sw-lg-70 min-h-100 bg-foreground d-flex justify-content-center align-items-center shadow-deep py-5 full-page-content-right-border"},B={class:"sw-lg-50 px-5"};function D(i,s,t,n,o,d){const r=_("login-form");return a(),l("div",C,[s[2]||(s[2]=e("div",{class:"fixed-background"},null,-1)),e("div",P,[e("div",j,[s[1]||(s[1]=e("div",{class:"offset-0 col-12 d-none d-lg-flex offset-md-1 col-lg h-lg-100"},[e("div",{class:"min-h-100 d-flex align-items-center"},[e("div",{class:"w-100 w-lg-75 w-xxl-50"})])],-1)),e("div",L,[e("div",O,[e("div",B,[s[0]||(s[0]=v('<div class="mb-5"><h2 class="cta-1 mb-0 text-primary">Ласкаво просимо,</h2><h2 class="cta-1 text-primary">Давайте почнемо!</h2></div><div class="mb-5"><p class="h6">Будь ласка,</p><p class="h6">Використовуйте свої облікові дані для входу.</p></div>',2)),e("div",null,[b(r,{"csrf-token":t.csrfToken},null,8,["csrf-token"])])])])])])])])}const A=g(q,[["render",D]]);export{A as default};
